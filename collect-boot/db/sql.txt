-- SN表
DROP TABLE IF EXISTS `xx_sn`;
CREATE TABLE `xx_sn` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `last_value` bigint(20) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;
-- 区域表
DROP  TABLE IF EXISTS `sb_area`;
CREATE TABLE sb_area
(
	id int NOT NULL AUTO_INCREMENT COMMENT '编号',
	parent_id int NOT NULL COMMENT '父级编号',
	parent_ids varchar(100) NOT NULL COMMENT '所有父级编号',
	area_name varchar(100) NOT NULL COMMENT '名称',
	sort_ int NOT NULL COMMENT '排序',
	code_ varchar(20) COMMENT '区域编码',
	type char(1) COMMENT '区域类型',
	create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
	PRIMARY KEY (id)
) COMMENT = '区域表';

-- 分类表
DROP  TABLE IF EXISTS `sb_category`;
CREATE TABLE `sb_category` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '编号',
  `parent_id` int(11) DEFAULT NULL COMMENT '父级编号',
  `parent_ids` varchar(100) DEFAULT NULL COMMENT '所有父级编号',
  `name_` varchar(100) NOT NULL COMMENT '名称',
  `sort_` int(11) NOT NULL COMMENT '排序',
  `code_` varchar(100) DEFAULT NULL COMMENT '分类编码',
  `level_` int(11) DEFAULT NULL COMMENT '层级',
  `icon` varchar(100) DEFAULT NULL COMMENT '图标',
  `price` decimal(5,2) DEFAULT NULL COMMENT '基准价',
  `market_price` decimal(5,2) DEFAULT NULL COMMENT '市场价',
  `unit` varchar(20) DEFAULT NULL COMMENT '计量单位',
  `ismetering` char(1) DEFAULT '0' COMMENT '是否计量',
  create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='分类表';
-- insert into sb_category(parent_id,name_,sort_,code_,level_,icon,price,unit,create_date,update_date) 
-- values(0,'家电','1','001','0','60','600','',NOW(),NOW());

--  insert into sb_category(parent_id,parent_ids,name_,sort_,code_,level_,icon,price,unit,create_date,update_date) 
-- values(1,'1_','冰箱','1','0011','1','60','600','',NOW(),NOW());

-- insert into sb_category(parent_id,parent_ids,name_,sort_,code_,level_,icon,price,unit,create_date,update_date) 
-- values(1,'1_','彩电','2','0012','1','50','500','',NOW(),NOW());

ALTER TABLE sb_category ADD title INT DEFAULT '0' comment '最上层'
ALTER TABLE sb_category ADD rec_notes VARCHAR(200)  comment '垃圾回收须知'
ALTER TABLE sb_category ADD rec_type_exp VARCHAR(200)  comment '回收类型说明'
ALTER TABLE sb_category ADD title int(11)  COMMENT '最上层';
-- 小区表
DROP  TABLE	 IF EXISTS `sb_community`;
CREATE TABLE `sb_community` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `area_id` int(11) DEFAULT NULL COMMENT '父级编号',
  `parent_ids` varchar(100) DEFAULT NULL COMMENT '所有父级编号',
  `name_` varchar(100) NOT NULL COMMENT '名称',
  `address` varchar(255) NOT NULL COMMENT '地址',
  `zipcode` varchar(10) DEFAULT NULL COMMENT '邮编',
  `longitude` decimal(20,17) DEFAULT NULL COMMENT '经度',
  `latitude` decimal(20,17) DEFAULT NULL COMMENT '纬度',
  initials char(1) NOT NULL COMMENT '首字母',
  create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='小区表';

-- 分类属性表
DROP  TABLE IF EXISTS `sb_category_attr`;
CREATE TABLE sb_category_attr
(
	id int NOT NULL AUTO_INCREMENT COMMENT '编号',
	name_ varchar(100) NOT NULL COMMENT '属性名称',
	sort_ int COMMENT '排序',
	category_id int NOT NULL COMMENT '分类id',
	create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
	PRIMARY KEY (id)
) COMMENT = '分类属性表';
-- INSERT into sb_category_attr(name_,sort_,category_id,create_date,update_date) values('使用年限',1,2,NOW(),NOW());
-- INSERT into sb_category_attr(name_,sort_,category_id,create_date,update_date) values('规格',2,2,NOW(),NOW());

-- 分类属性选项
DROP  TABLE IF EXISTS `sb_category_attr_option`;
CREATE TABLE sb_category_attr_option
(
	id int NOT NULL AUTO_INCREMENT  COMMENT '编号',
	name_ varchar(100) NOT NULL COMMENT '属性名称',
	sort_ int COMMENT '排序',
	category_attr_id int NOT NULL COMMENT '分类属性id',
	price decimal(20,17) COMMENT '调整价',
	create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
	PRIMARY KEY (id)
) COMMENT = '分类属性选项';
-- insert into sb_category_attr_option(name_,sort_,category_attr_id,price,create_date,update_date) values('10年',0,1,-5,NOW(),NOW());
-- insert into sb_category_attr_option(name_,sort_,category_attr_id,price,create_date,update_date) values('单开门',0,2,-5,NOW(),NOW());
-- insert into sb_category_attr_option(name_,sort_,category_attr_id,price,create_date,update_date) values('双开门',0,2,10,NOW(),NOW());

DROP  TABLE	 IF EXISTS `sb_company_category_attr_option`;
CREATE TABLE `sb_company_category_attr_option` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `company_id` int(11) DEFAULT NULL COMMENT '公司id',
  `category_attr_option_id` int(11) DEFAULT NULL COMMENT '分类属性选项id',
  `attr_option_price` decimal(5,2)  COMMENT '属性增减价格',
  create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='分类属性价格增减表';


-- 回收企业表
DROP  TABLE IF EXISTS `sb_company`;
CREATE TABLE sb_company
(
	id int NOT NULL AUTO_INCREMENT COMMENT '编号',
	name_ VARCHAR(100) NOT NULL COMMENT '企业名称',
	company_code VARCHAR(50) NOT NULL COMMENT '企业编号',
	contacts VARCHAR(100) NOT NULL COMMENT '联系人',
	tel VARCHAR(50) COMMENT '联系电话',
	address VARCHAR(100) COMMENT '地址',
	introduction VARCHAR(1000) COMMENT '简介',
	icon VARCHAR(200) COMMENT '图标',
	website VARCHAR(200) COMMENT '网址',
	email VARCHAR(200) COMMENT '电子邮件',
	zipcode VARCHAR(20) COMMENT '邮编',
	org_code VARCHAR(20) COMMENT '组织机构编码',
	create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
	PRIMARY KEY (id)
) COMMENT = '回收企业表';
ALTER TABLE sb_company ADD company_type VARCHAR(20) COMMENT '回收企业类型，回收企业，智能设备回收企业,回收企业并且是智能设备回收企业';

-- 回收企业分类关联表
DROP  TABLE IF EXISTS `sb_company_category`;
CREATE TABLE sb_company_category
(
	id int NOT NULL AUTO_INCREMENT COMMENT '编号',
	category_id VARCHAR(100) NOT NULL COMMENT '分类id',
	company_id VARCHAR(50) NOT NULL COMMENT '企业id',
	create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
	PRIMARY KEY (id)
) COMMENT = '回收企业分类关联表';

-- 回收企业服务范围表
DROP  TABLE IF EXISTS `sb_company_service`;
CREATE TABLE sb_company_service
(
	id int NOT NULL AUTO_INCREMENT COMMENT '编号',
	company_id int NOT NULL COMMENT '企业id',
	community_id int NOT NULL COMMENT '小区id',
	area_id int NOT NULL COMMENT '区域id',
	parent_ids VARCHAR(100) COMMENT '区域层级',
	level char(1) DEFAULT '0' NOT NULL COMMENT '0为私海,1为公海',
	create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
	PRIMARY KEY (id)
) COMMENT = '回收企业服务范围表';

-- 回收人员
DROP  TABLE IF EXISTS `sb_recyclers`;
CREATE TABLE sb_recyclers
(
    id int NOT NULL AUTO_INCREMENT COMMENT '编号',
	name_ VARCHAR(100) NOT NULL COMMENT '姓名',
	id_card VARCHAR(20) COMMENT '身份证',
	id_card_rev VARCHAR(20) COMMENT '身份证反面',
	tel VARCHAR(20) COMMENT '电话',
	icon VARCHAR(200) COMMENT '照片',
	address VARCHAR(200) COMMENT '地址',
	sex char(1)  COMMENT '性别',
	status_ char(1) DEFAULT '0' NOT NULL COMMENT '开工状态',
	auth_status char(1) DEFAULT '0' NOT NULL COMMENT '认证状态',
	tencent_token VARCHAR(200) COMMENT '信鸽token',
	create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
	PRIMARY KEY (id)
) COMMENT = '回收人员';
ALTER TABLE sb_recyclers CHANGE id_card_rev id_card_rev VARCHAR(200) COMMENT '身份证反面';
ALTER TABLE sb_recyclers ADD id_card_obv VARCHAR(200) COMMENT '身份证正面';
ALTER TABLE sb_recyclers ADD tencent_token VARCHAR(200) COMMENT '信鸽token';
-- 回收人员分类关联表
DROP  TABLE IF EXISTS `sb_recyclers_category`;
CREATE TABLE sb_recyclers_category
(
	id int NOT NULL AUTO_INCREMENT COMMENT '编号',
	recycler_id int NOT NULL COMMENT '回收人员id',
	category_id int NOT NULL COMMENT '分类id',
	create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
	PRIMARY KEY (id)
) COMMENT = '回收人员分类关联表';

-- 回收企业登录账号表
DROP  TABLE IF EXISTS `sb_company_account`;
CREATE TABLE sb_company_account
(
	id int NOT NULL AUTO_INCREMENT COMMENT '编号',
	company_id int NOT NULL COMMENT '企业id',
	username varchar(100) NOT NULL COMMENT '用户名',
	password_ varchar(200) NOT NULL COMMENT '密码',
	status_ char(1) DEFAULT '0' NOT NULL COMMENT '状态',
	create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
	PRIMARY KEY (id)
) COMMENT = '回收企业登录账号表';

-- 会员表
DROP  TABLE IF EXISTS `sb_member`;
CREATE TABLE sb_member
(
	id int NOT NULL AUTO_INCREMENT COMMENT '编号',
	id_card varchar(50)  COMMENT '身份证',
	name_ varchar(100)  COMMENT '姓名',
	address varchar(255)  COMMENT '地址',
	green_code varchar(20)  COMMENT '绿账号',
	ali_user_id varchar(50)  COMMENT '阿里userid',
	create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
	PRIMARY KEY (id)
) COMMENT = '会员表';
ALTER TABLE sb_member ADD mobile VARCHAR(20) COMMENT '手机号';

-- 订单表
DROP  TABLE IF EXISTS `sb_order`;
CREATE TABLE sb_order
(
	id int NOT NULL AUTO_INCREMENT COMMENT '编号',
	memeber_id int NOT NULL COMMENT '会员id',
	company_id int NOT NULL COMMENT '回收企业id',
	recycler_id int  COMMENT '回收人员id',
	status_ varchar(20) DEFAULT '0' NOT NULL COMMENT '订单状态',
	order_no varchar(50)  COMMENT '订单编号',
	area_id int NOT NULL COMMENT '区域id',
	community_id int NOT NULL COMMENT '小区id',
	address varchar(255)  COMMENT '地址',
	tel  varchar(50)  COMMENT '电话',
	link_man varchar(50)  COMMENT '联系人',
	category_id int NOT NULL COMMENT '分类id',
	category_parent_ids varchar(255)  COMMENT '分类id的parent_ids',
	price decimal(20,17) COMMENT '基准价', 
	unit varchar(50) COMMENT '计量单位',
	qty int COMMENT '数量',
	complete_date datetime COMMENT '完成时间',
	is_evaluated char(1) DEFAULT '0' NOT NULL COMMENT '是否评价过',
	cancel_reason varchar(200)  COMMENT '取消原因',
	cancel_time datetime  COMMENT '取消时间',
	level char(1) DEFAULT '0' NOT NULL COMMENT '0为私海',
	arrival_time datetime COMMENT '上门时间',
	distribute_time datetime COMMENT '派单时间',
	receive_time datetime COMMENT '接单时间',
	arrival_period varchar(10) COMMENT '上午am 下午pm',
	green_code varchar(20)  COMMENT '绿账号',
	ali_user_id varchar(50)  COMMENT '阿里userid',
	create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
	PRIMARY KEY (id)
) COMMENT = '订单表';
ALTER TABLE sb_order ADD is_distributed char(1) DEFAULT '0' NOT NULL COMMENT '是否已派过单';
ALTER TABLE sb_order ADD full_address char(50) COMMENT '详细地址';
ALTER TABLE sb_order CHANGE  memeber_id  member_id int NOT NULL COMMENT '会员id';
ALTER TABLE sb_order ADD ach_price decimal(10, 2)  COMMENT '完成价格';
ALTER TABLE sb_order ADD is_cash tinyint(4)  COMMENT '是否现金支付';
ALTER TABLE sb_order ADD ach_remarks VARCHAR(200)  COMMENT '订单完成备注';
-- 订单分类属性选项明细
DROP  TABLE IF EXISTS `sb_order_item`;
CREATE TABLE sb_order_item
(
	id int NOT NULL AUTO_INCREMENT COMMENT '编号',
	order_id int NOT NULL COMMENT '订单id',
	category_id int NOT NULL COMMENT '分类id',
	category_name varchar(100) NOT NULL COMMENT '分类名称',
	category_attr_id int NOT NULL COMMENT '分类属性id',
	category_attr_name varchar(100) NOT NULL COMMENT '分类属性名称',
	category_attr_opp_id int NOT NULL COMMENT '分类属性选项id',
	category_attr_opption_name varchar(100) NOT NULL COMMENT '分类属性名称',
	adjust_orice decimal(20,17) COMMENT '调整价', 
	create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
	PRIMARY KEY (id)
) COMMENT = '订单分类属性明细';
ALTER TABLE sb_order_item ADD parent_name varchar(100)  COMMENT '父类name';
ALTER TABLE sb_order_item ADD parent_id int(11)  COMMENT '父类id';
ALTER TABLE sb_order_item ADD parent_ids VARCHAR(20)  COMMENT '分类id的parent_ids';
ALTER TABLE sb_order_item ADD amount int(11)  COMMENT '数量';
ALTER TABLE sb_order_item ADD unit char(20)  COMMENT '单位';
ALTER TABLE sb_order_item ADD price float(20)  COMMENT '价格';

-- 完成订单属性价格表
DROP TABLE IF EXISTS `sb_order_item_ach`;
CREATE TABLE `sb_order_item_ach` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '编号',
  `order_id` int(11) NOT NULL COMMENT '订单id',
  `category_id` int(11) NOT NULL COMMENT '分类id',
  `category_name` varchar(100) NOT NULL COMMENT '分类名称',
  `category_attr_id` int(11) DEFAULT NULL COMMENT '分类属性id',
  `category_attr_name` varchar(100) DEFAULT NULL COMMENT '分类属性名称',
  `category_attr_opp_id` int(11) DEFAULT NULL COMMENT '分类属性选项id',
  `category_attr_opption_name` varchar(100) DEFAULT NULL COMMENT '分类属性名称',
  `parent_name` varchar(100) DEFAULT NULL COMMENT '''父类name''',
  `parent_id` int(11) NOT NULL COMMENT '父级编号',
  `parent_ids` varchar(20) DEFAULT NULL COMMENT '分类id的parent_ids',
  `amount` int(11) DEFAULT NULL COMMENT '数量',
  `unit` char(20) DEFAULT NULL COMMENT '单位',
  `price` float DEFAULT NULL COMMENT '单价',
  `adjust_orice` decimal(20,17) DEFAULT NULL COMMENT '调整价',
  `create_by` varchar(50) DEFAULT NULL COMMENT '创建者',
  `create_date` datetime NOT NULL COMMENT '创建时间',
  `update_by` varchar(50) DEFAULT NULL COMMENT '更新者',
  `update_date` datetime NOT NULL COMMENT '更新时间',
  `remarks` varchar(255) DEFAULT NULL COMMENT '备注信息',
  `del_flag` char(1) NOT NULL DEFAULT '0' COMMENT '删除标记',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=65 DEFAULT CHARSET=utf8 COMMENT='订单分类属性明细';


-- 订单分类属性明细
DROP  TABLE IF EXISTS `sb_order_pic`;
CREATE TABLE sb_order_pic
(
	id int NOT NULL AUTO_INCREMENT COMMENT '编号',	
	order_id int NOT NULL COMMENT '订单id',
	pic_url varchar(255) NOT NULL COMMENT '订单图片url',
	small_pic varchar(255) NOT NULL COMMENT '小图url',
	orig_pic varchar(255) NOT NULL COMMENT '原图url',
	create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
	PRIMARY KEY (id)
) COMMENT = '订单分类属性明细';

-- 订单日志表
DROP  TABLE IF EXISTS `sb_order_log`;
CREATE TABLE sb_order_log
(
	id int NOT NULL AUTO_INCREMENT COMMENT '编号',	
	order_id int NOT NULL COMMENT '订单id',
	op VARCHAR(100)  COMMENT '操作',
	op_status_after VARCHAR(100)  COMMENT '操作后状态',
	op_status_before VARCHAR(100) COMMENT '操作前状态',
	create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
	PRIMARY KEY (id)
) COMMENT = '订单日志表';

-- 评价表
DROP  TABLE IF EXISTS `sb_order_evaluation`;
CREATE TABLE sb_order_evaluation
(
	id int NOT NULL AUTO_INCREMENT COMMENT '编号',	
	order_id int NOT NULL COMMENT '订单id',
	recycler_id int NOT NULL COMMENT '回收人员id',
	score int not null COMMENT '得分',
	member_id int not null COMMENT '会员id',
	content VARCHAR(500) COMMENT '评论内容',
	create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
	PRIMARY KEY (id)
) COMMENT = '评价表';

-- 短信消息表
DROP  TABLE IF EXISTS  `sb_message`;
CREATE TABLE `sb_message` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '编号',
  `tel` varchar(20) NOT NULL COMMENT '手机号',
  `message_code` varchar(20) NOT NULL COMMENT '短信code',
  `validity` int(11) NOT NULL DEFAULT '5' COMMENT '有效期分钟',
  create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='评价表';

-- 回收人员地址关联表
DROP TABLE IF EXISTS `sb_recycler_commuity`;
CREATE TABLE `sb_recycler_commuity` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '编号',
  `commuity_id` int NOT NULL COMMENT '小区id',
  `recycler_id` int NOT NULL COMMENT '回收人员id',
  area_id int NOT NULL COMMENT '区域id',
	parent_ids VARCHAR(100) COMMENT '区域层级',
  create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='回收人员地址关联表';

-- 取消原因表
DROP TABLE IF EXISTS `sb_cancel_reason`;
CREATE TABLE `sb_cancel_reason` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '编号',
   reason varchar(255) NOT NULL COMMENT '原因',
  type varchar(10) NOT NULL COMMENT '取消类型，默认订单取消order',
  create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='取消原因表';

-- 积分表
DROP TABLE IF EXISTS `sb_point`;
CREATE TABLE `sb_point` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '编号',
   member_id int(11) NOT NULL COMMENT '会员id',
  point int NOT NULL COMMENT '积分',
  create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='积分表';

-- 积分流水表
DROP TABLE IF EXISTS `sb_point_list`;
CREATE TABLE `sb_point_list`(
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '编号',
   member_id int(11) NOT NULL COMMENT '会员id',
  point int NOT NULL COMMENT '积分',
  type varchar(10) NOT NULL COMMENT '类型',
  documentNo varchar(50) NOT NULL COMMENT '单据号',
  descrb varchar(100) NOT NULL COMMENT '描述',
   create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='积分流水表';
alter table sb_point_list CHANGE  documentNo  document_no varchar(50) NOT NULL COMMENT '单据号';

-- 回收人员和企业关联表
DROP TABLE IF EXISTS `sb_company_recycler`;
CREATE TABLE `sb_company_recycler`(
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '编号',
   recycler_id int(11) NOT NULL COMMENT '回收人员id',
   company_id int(11) NOT NULL COMMENT '回收企业id',
 	status_ varchar(20) NOT NULL  COMMENT '状态 申请 入住  拒绝',
   create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='回收人员和企业关联表';


-- 管理员
DROP TABLE IF EXISTS `sb_admin`;
CREATE TABLE `sb_admin`(
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'id',
   username varchar(50) NOT NULL COMMENT '用户名',
   password varchar(200) NOT NULL COMMENT '密码',
   name_ varchar(200) NOT NULL COMMENT '姓名',
   create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='管理员';

--版本更新表
DROP TABLE IF EXISTS `sb_apk_version`;
CREATE TABLE `sb_apk_version`(
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'id',
   version varchar(50) NOT NULL COMMENT '版本号',
   version_code varchar(50)  COMMENT '版本编号',
   version_no varchar(50)  COMMENT '版本名称',
    download_url varchar(255)  COMMENT '下载地址',
    updater_desc varchar(255)  COMMENT '更新内容',
    is_force char(1)  COMMENT '是否强制更新1强制更新2普通更新',
    app_name varchar(10)  COMMENT 'app名称',
    apk_name varchar(10)  COMMENT '安装包名称',
    apk_type char(5)  COMMENT ' 版本类型1管理员版，2保洁员版，3市民版', 
   create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(10) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='版本更新表';



	
--设备类型表
DROP  TABLE IF EXISTS `sb_device_type`;
CREATE TABLE sb_device_type
(
	`id` int(11) NOT NULL AUTO_INCREMENT COMMENT '编号',
  `name_` varchar(100) NOT NULL COMMENT '名称',
  `sort_` int(11) NOT NULL COMMENT '排序',
  `code_` varchar(100) DEFAULT NULL COMMENT '分类编码',
  `icon` varchar(100) DEFAULT NULL COMMENT '图标',
  create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
	PRIMARY KEY (id)
) COMMENT = '设备类型表';



--设备表
DROP  TABLE IF EXISTS `sb_device`;
CREATE TABLE sb_device
(
	id int NOT NULL AUTO_INCREMENT COMMENT '编号',
	device_code VARCHAR(100) NOT NULL COMMENT '设备编号',
	company_id int(11) NOT NULL COMMENT '企业id',
	province varchar(50) not null '省份',
	tel VARCHAR(50) COMMENT '联系电话',
	lon decimal(10,7)   COMMENT '高德经度',
	lat decimal(10,7)   COMMENT '高德纬度',
	status_ varchar(50) COMMENT '状态'
	create_by varchar(50) COMMENT '创建者',
	create_date datetime NOT NULL COMMENT '创建时间',
	update_by varchar(50) COMMENT '更新者',
	update_date datetime NOT NULL COMMENT '更新时间',
	remarks varchar(255) COMMENT '备注信息',
	del_flag char(1) DEFAULT '0' NOT NULL COMMENT '删除标记',
	PRIMARY KEY (id)
) COMMENT = '设备表';

DROP TABLE IF EXISTS `sb_member_address`;
CREATE TABLE `sb_member_address` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '编号',
  `member_id` varchar(50) DEFAULT NULL COMMENT '会员id',
  `area_id` int(11) NOT NULL COMMENT '区域id',
  `street_id` int(11) NOT NULL,
  `community_id` int(11) NOT NULL COMMENT '小区id',
  `address_` varchar(500) DEFAULT NULL COMMENT '地址',
  `comm_by_user_input` varchar(200) DEFAULT NULL COMMENT '用户输入小区地址',
  `house_number` varchar(255) DEFAULT NULL COMMENT '门牌号',
  `tel` varchar(50) DEFAULT NULL COMMENT '电话',
  `is_selected` int(2) NOT NULL DEFAULT '0' COMMENT '是否是默认',
  `create_by` varchar(50) DEFAULT NULL COMMENT '创建者',
  `create_date` datetime NOT NULL COMMENT '创建时间',
  `update_by` varchar(50) DEFAULT NULL COMMENT '更新者',
  `update_date` datetime NOT NULL COMMENT '更新时间',
  `remarks` varchar(255) DEFAULT NULL COMMENT '备注信息',
  `del_flag` char(1) NOT NULL DEFAULT '0' COMMENT '删除标记',
  `name_` varchar(32) DEFAULT NULL COMMENT '用户姓名',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=116 DEFAULT CHARSET=utf8 COMMENT='会员地址表';